(()=>{"use strict";var e={136:function(e,a,t){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var a,t=1,r=arguments.length;t<r;t++)for(var o in a=arguments[t])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e},r.apply(this,arguments)};Object.defineProperty(a,"__esModule",{value:!0});var o,i=t(25);function s(){chrome.storage.local.clear(),chrome.alarms.clearAll(),chrome.notifications.clear("PostureNotification");var e=new i.NotificationData;chrome.storage.local.set({notificationData:e,computerState:"active"}),chrome.idle.setDetectionInterval(300)}function n(){chrome.storage.local.get("computerState",(function(e){if("active"==e.computerState){var a={iconUrl:o.iconUrl,title:o.title,message:o.message,type:o.type,silent:o.silent,requireInteraction:!1};chrome.notifications.clear("PostureNotification",(function(){chrome.notifications.create("PostureNotification",a,(function(){chrome.runtime.lastError&&console.error("Last error: "+chrome.runtime.lastError)}))}))}}))}chrome.runtime.onInstalled.addListener((function(){s()})),chrome.runtime.onMessage.addListener((function(e,a,t){var i={};switch(e.request){case"updateAlarm":o=e.notificationData;var c=!0;chrome.alarms.clearAll((function(e){e||(console.error("Failed to clear all existing alarms"),c=!1),chrome.alarms.onAlarm.removeListener(n),chrome.alarms.onAlarm.hasListeners()&&(console.error("Alarm still has active event listeners attached"),c=!1),chrome.alarms.create("PostureCheck",{periodInMinutes:o.interval+1/60}),chrome.alarms.onAlarm.addListener(n),chrome.alarms.onAlarm.hasListener(n)||(console.error("Failed to attach event listener alarmListener"),i.alarmCreationSuccess=!1)})),i.alarmCreationSuccess=c;break;case"pauseAlarm":o=e.notificationData;var l=!0;chrome.alarms.clearAll((function(e){e||(console.error("Failed to clear all existing alarms"),l=!1),chrome.alarms.onAlarm.removeListener(n),chrome.alarms.onAlarm.hasListeners()&&(console.error("Alarm still has active event listeners attached"),l=!1)}));var m=e.timeRemaining;chrome.storage.local.set({notificationData:r(r({},o),{pauseStatus:{isPaused:!0,timeRemaining:m}})}),i.alarmPauseSuccess=l;break;case"resumeAlarm":o=e.notificationData;var u=!0;chrome.alarms.create("PostureCheck",{periodInMinutes:o.interval,delayInMinutes:(o.pauseStatus.timeRemaining+1)/60}),chrome.alarms.onAlarm.addListener(n),chrome.alarms.onAlarm.hasListener(n)||(console.error("Failed to attach event listener alarmListener when resuming alarm"),u=!1),chrome.storage.local.set({notificationData:r(r({},o),{pauseStatus:{isPaused:!1,timeRemaining:0}})}),i.alarmResumeSuccess=u;break;case"cancelAlarm":var h=!0;chrome.alarms.clearAll((function(e){e||(console.error("Failed to clear all existing alarms"),h=!1),chrome.alarms.onAlarm.removeListener(n),chrome.alarms.onAlarm.hasListeners()&&(console.error("Alarm still has active event listeners attached"),h=!1)})),chrome.storage.local.set({notificationData:r(r({},o),{pauseStatus:{isPaused:!1,timeRemaining:0}})}),i.alarmCancelSuccess=h;break;case"resetExtension":s()}t(i)})),chrome.idle.onStateChanged.addListener((function(e){chrome.storage.local.set({computerState:e})}))},25:(e,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NotificationData=void 0;a.NotificationData=function(e){var a=void 0===e?{}:e,t=a.title,r=void 0===t?"PostureCheck":t,o=a.message,i=void 0===o?"How is your posture right now?":o,s=a.type,n=void 0===s?"basic":s,c=a.iconUrl,l=void 0===c?"../images/clock.png":c,m=a.interval,u=void 0===m?10:m,h=a.silent,v=void 0!==h&&h,d=a.pauseStatus,f=void 0===d?{isPaused:!1,timeRemaining:0}:d;this.title=r,this.message=i,this.type=n,this.iconUrl=l,this.interval=u,this.silent=v,this.pauseStatus=f}}},a={};!function t(r){var o=a[r];if(void 0!==o)return o.exports;var i=a[r]={exports:{}};return e[r].call(i.exports,i,i.exports,t),i.exports}(136)})();